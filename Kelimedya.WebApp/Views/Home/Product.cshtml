@model Kelimedya.WebApp.Areas.Admin.Models.ProductViewModel

@{
    Layout = "_Layout";
    ViewData["Title"] = "Ürün Detayları";
}

<main>
    <section class="td_page_heading td_center td_bg_filed td_heading_bg text-center td_hobble"
             style="background-image: url('~/theme/web_UI/assets/img/others/page_heading_bg.jpg'); background-size: cover; min-height: 200px">
        <div class="container">
            <div class="td_page_heading_in">
                <h1 class="td_white_color td_fs_48 td_mb_10">Ürün Detayları</h1>
                <ol class="breadcrumb m-0 td_fs_20 td_opacity_8 td_semibold td_white_color">
                    <li class="breadcrumb-item">
                        <a href="@Url.Action("Index", "Home")">Anasayfa</a>
                    </li>
                    <li class="breadcrumb-item active">Ürün Detayları</li>
                </ol>
            </div>
        </div>
        <div class="td_page_heading_shape_1 position-absolute td_hover_layer_3"></div>
        <div class="td_page_heading_shape_2 position-absolute td_hover_layer_5"></div>
        <div class="td_page_heading_shape_3 position-absolute">
            <img src="~/theme/web_UI/assets/img/others/page_heading_shape_3.svg" alt="">
        </div>
        <div class="td_page_heading_shape_4 position-absolute">
            <img src="~/theme/web_UI/assets/img/others/page_heading_shape_4.svg" alt="">
        </div>
        <div class="td_page_heading_shape_5 position-absolute">
            <img src="~/theme/web_UI/assets/img/others/page_heading_shape_5.svg" alt="">
        </div>
        <div class="td_page_heading_shape_6 position-absolute td_hover_layer_3"></div>
    </section>

    <section class="py-5 product-detail-section">
        <div class="container">
            <div class="row gy-5">
                <!-- Ürün Resmi -->
                <div class="col-md-5">
                    <div class="product-img-wrapper shadow-sm">
                        @if (!string.IsNullOrEmpty(Model.ImageUrl))
                        {
                            <img id="mainProductImage" src="@Model.ImageUrl" alt="@Model.Name" class="img-fluid rounded product-main-img"/>
                        }
                        else
                        {
                            <img id="mainProductImage" src="~/theme/web_UI/assets/img/no_image.png" alt="Resim Yok" class="img-fluid rounded product-main-img"/>
                        }
                    </div>
                    <div class="thumbnail-list d-flex gap-2 mt-3">
                        @* Eğer çoklu resim varsa buradan seçilecek; şu anda ana resim gösteriliyor *@
                        @if (!string.IsNullOrEmpty(Model.ImageUrl))
                        {
                            <img src="@Model.ImageUrl" alt="@Model.Name" class="img-thumbnail thumbnail-img active" onclick="changeMainImage('@Model.ImageUrl')"/>
                        }
                    </div>
                </div>

                <!-- Ürün Bilgileri -->
                <div class="col-md-7">
                    <div class="product-info">
                        <h2 class="product-title">@Model.Name</h2>
                        <h4 class="text-muted product-price">@Model.Price.ToString("C")</h4>
                        <hr class="my-4"/>
                        <div class="product-description">
                            @Html.Raw(Model.Description)
                        </div>
                        <hr class="my-4"/>
                        <h5 class="mb-3">Dahil Edilen Eğitimler</h5>
                        @if (Model.ProductCourses != null && Model.ProductCourses.Any())
                        {
                            <div class="d-flex flex-wrap gap-2">
                                @foreach (var course in Model.ProductCourses)
                                {
                                    <span class="badge course-badge p-2">@course.Course.Title</span>
                                }
                            </div>
                        }
                        else
                        {
                            <p class="text-muted">Bu ürüne dahil eğitim bulunmamaktadır.</p>
                        }
                        <div class="mt-4">
                            <form asp-controller="Home" asp-action="AddToCart" method="post" class="d-flex align-items-center gap-2">
                                <input type="hidden" name="ProductId" value="@Model.Id"/>
                                <button type="submit" class="btn btn-lg td_btn_in td_white_color td_accent_bg">
                                    <i class="fa fa-shopping-cart me-2"></i> Sepete Ekle
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</main>

@section Scripts {
    <script>
        function changeMainImage(src) {
            const mainImg = document.getElementById("mainProductImage");
            if(mainImg){
                mainImg.src = src;
            }
        }
    </script>
}

<style>
    /* Ürün Detay Sayfası Genel Ayarlar */
    .product-detail-section {
        font-family: 'Inter', sans-serif;
        color: #2c3e50;
    }
    /* Ürün Resmi Kutusu */
    .product-img-wrapper {
        overflow: hidden;
        border-radius: 8px;
    }
    .product-main-img {
        transition: transform 0.3s ease;
    }
    .product-main-img:hover {
        transform: scale(1.02);
    }
    /* Thumbnail Stilleri */
    .thumbnail-img {
        cursor: pointer;
        width: 80px;
        height: 60px;
        object-fit: cover;
        border: 2px solid transparent;
        border-radius: 4px;
        transition: border-color 0.3s ease, transform 0.3s ease;
    }
    .thumbnail-img:hover,
    .thumbnail-img.active {
        border-color: #3498db;
        transform: scale(1.05);
    }
    /* Ürün Bilgi Alanı */
    .product-info .product-title {
        font-size: 2.75rem;
        font-weight: 700;
    }
    .product-info .product-price {
        font-size: 1.75rem;
        font-weight: 600;
        color: #e74c3c;
    }
    .product-info hr {
        border-top: 1px solid #dee2e6;
    }
    .product-description {
        font-size: 1rem;
        line-height: 1.75;
        color: #606c76;
    }
    /* Badge - Kurs Bilgileri */
    .course-badge {
        background: #f1f5f9;
        color: #2c3e50;
        font-size: 0.9rem;
        font-weight: 500;
        border-radius: 20px;
    }
    /* Satın Al Butonu */
    .product-buy-btn {
        font-size: 1.125rem;
        padding: 0.75rem 2rem;
        border-radius: 8px;
        background-color: #3498db;
        border: none;
        transition: background-color 0.3s ease, transform 0.3s ease;
    }
    .product-buy-btn:hover {
        background-color: #2980b9;
        transform: translateY(-2px);
    }
</style>